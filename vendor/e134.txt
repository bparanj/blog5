File Uploads using Paperclip in Rails 5

Pre-requisite imagemagick.

Create controllers:
categories, products

Create models:
category, product

category has many products
product belongs to category
  has_attached_file :photo, :styles => { :small => "150x150>" },
                    :url  => "/assets/products/:id/:style/:basename.:extension",
                    :path => ":rails_root/public/assets/products/:id/:style/:basename.:extension"
  
  validates_attachment_presence :photo
  validates_attachment_size :photo, :less_than => 5.megabytes
  validates_attachment_content_type :photo, :content_type => ['image/jpeg', 'image/png']

Create views.
category views are same, layout is same. Product form partial:

<%= form_for @product, :html => { :multipart => true } do |f| %>
  
  same as before.
  
  <p>
    <%= f.file_field :photo %>
  </p>
  <p><%= f.submit "Submit" %></p>
<% end %>

product show page:

<%= image_tag @product.photo.url(:small) %>

other views are same as before.

seeds.rb is same as before.

  create_table "categories", :force => true do |t|
    t.string   "name"
  end

  create_table "products", :force => true do |t|
    t.integer  "category_id"
    t.string   "name"
    t.decimal  "price"
    t.text     "description"

    t.string   "photo_file_name"
    t.string   "photo_content_type"
    t.integer  "photo_file_size"
    t.datetime "photo_updated_at"
  end
  
